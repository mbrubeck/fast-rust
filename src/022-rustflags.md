## rustc flags

The Rust compiler has many options that don't have corresponding keys in the
`Cargo.toml` file.  When you are building a Cargo project, you can pass extra
options by setting the `RUSTFLAGS` environment variable or setting the
`build.rustflags` or `target.<triple>.rustflags` key in a
[.cargo/config][config] file.

Like the `[profile.*]` sections in the manifest, `.cargo/config` files from
dependencies are ignored.  Only the top-level crate's config file is used.

### target-cpu and target-feature

By default, Rust will build code that runs on a wide range of processors.
This means that it can't use all the instructions that are available on newer
processors.  In particular this affects the code generated by [vectorized]
loops.

If you are building and running a program on a single computer and don't care
whether it is portable to computers with different processors, you can pass
`-C target-cpu=native` to tell the compiler to use all the processor features
available on the computer where it is currently running.  Add these lines to a
`.cargo/config` file in your project's directory or any of its parent
directories:

```toml
[build]
rustflags = ["-C", "target-cpu=native"]
```

If you want to use specific processor features, but not necessarily all the
features of your current computer, use the `-C target-feature` option to add
or remove features.  For example, add this to `.cargo/config` to make 32-bit
Linux builds use [SSE3] instructions:

```toml
[target.i686-unknown-linux-gnu]
rustflags = ["-C", "target-feature=+sse3"]
```

This will generate code that might not run on older processors like the
Pentium 4, which doesn't support the SSE3 extension.

You can run these commands for more information about the `target-cpu` and
`target-feature` options:

```sh
rustc -C target-cpu=help
rustc -C target-feature=help
```

[config]: http://doc.crates.io/config.html
[vectorized]: https://en.wikipedia.org/wiki/Automatic_vectorization
[SSE3]: https://en.wikipedia.org/wiki/SSE3
